{% extends "base.html" %}

{% block title %}{{ 'Edit' if book else 'Add' }} Book - BookShare{% endblock %}

{% block content %}
<div class="mb-4">
    <a href="{{ '/books/' + book.id|string if book else '/books' }}" class="text-black hover:underline font-semibold">
        <i class="fas fa-arrow-left mr-2"></i>Back to {{ 'Book' if book else 'Books' }}
    </a>
</div>


<div class="card-modern max-w-2xl mx-auto">
    <h1 class="text-3xl font-bold text-black mb-6">
        <i class="fas fa-{{ 'edit' if book else 'plus-circle' }}"></i>
        {{ 'Edit Book' if book else 'Add New Book' }}
    </h1>

    <form method="post" class="space-y-6">
        <!-- Title -->
        <div>
            <label for="title" class="block text-sm font-semibold text-gray-700 mb-2">
                Title <span class="text-red-500">*</span>
            </label>
            <input type="text" id="title" name="title" value="{{ book.title if book else '' }}" required
                class="form-input w-full" placeholder="Enter book title">
        </div>

        <!-- Author -->
        <div>
            <label for="author" class="block text-sm font-semibold text-gray-700 mb-2">
                Author <span class="text-red-500">*</span>
            </label>
            <input type="text" id="author" name="author" value="{{ book.author if book else '' }}" required
                class="form-input w-full" placeholder="Enter author name">
        </div>

        <!-- ISBN -->
        <div>
            <label for="isbn" class="block text-sm font-semibold text-gray-700 mb-2">
                ISBN
            </label>
            <input type="text" id="isbn" name="isbn" value="{{ book.isbn if book else '' }}" pattern="[0-9]{13}"
                maxlength="13" class="form-input w-full" placeholder="13-digit ISBN (optional)">
            <p class="text-sm text-gray-500 mt-1">13 digits, e.g., 9780743273565</p>
        </div>

        <!-- Year and Genre in a grid -->
        <div class="grid grid-cols-2 gap-4">
            <div>
                <label for="year" class="block text-sm font-semibold text-gray-700 mb-2">
                    Year
                </label>
                <input type="number" id="year" name="year" value="{{ book.year if book else '' }}" min="1000" max="2100"
                    class="form-input w-full" placeholder="e.g., 2024">
            </div>

            <div>
                <label for="genre" class="block text-sm font-semibold text-gray-700 mb-2">
                    Genre
                </label>
                <select id="gen" name="genre" class="form-select w-full">
                    <option value="">Select genre...</option>
                    <option value="Fiction" {{ 'selected' if book and book.genre=='Fiction' else '' }}>Fiction</option>
                    <option value="Non-Fiction" {{ 'selected' if book and book.genre=='Non-Fiction' else '' }}>
                        Non-Fiction</option>
                    <option value="Science Fiction" {{ 'selected' if book and book.genre=='Science Fiction' else '' }}>
                        Science Fiction</option>
                    <option value="Fantasy" {{ 'selected' if book and book.genre=='Fantasy' else '' }}>Fantasy</option>
                    <option value="Mystery" {{ 'selected' if book and book.genre=='Mystery' else '' }}>Mystery</option>
                    <option value="Thriller" {{ 'selected' if book and book.genre=='Thriller' else '' }}>Thriller
                    </option>
                    <option value="Romance" {{ 'selected' if book and book.genre=='Romance' else '' }}>Romance</option>
                    <option value="Historical" {{ 'selected' if book and book.genre=='Historical' else '' }}>Historical
                    </option>
                    <option value="Biography" {{ 'selected' if book and book.genre=='Biography' else '' }}>Biography
                    </option>
                    <option value="Self-Help" {{ 'selected' if book and book.genre=='Self-Help' else '' }}>Self-Help
                    </option>
                    <option value="Technology" {{ 'selected' if book and book.genre=='Technology' else '' }}>Technology
                    </option>
                    <option value="Science" {{ 'selected' if book and book.genre=='Science' else '' }}>Science</option>
                    <option value="Philosophy" {{ 'selected' if book and book.genre=='Philosophy' else '' }}>Philosophy
                    </option>
                    <option value="Poetry" {{ 'selected' if book and book.genre=='Poetry' else '' }}>Poetry</option>
                    <option value="Drama" {{ 'selected' if book and book.genre=='Drama' else '' }}>Drama</option>
                </select>
            </div>
        </div>

        <!-- Description -->
        <div>
            <label for="description" class="block text-sm font-semibold text-gray-700 mb-2">
                Description
            </label>
            <textarea id="description" name="description" rows="6" class="form-textarea w-full"
                placeholder="Enter book description (helps with AI recommendations)">{{ book.description if book else '' }}</textarea>
            <p class="text-sm text-gray mt-1">
                <i class="fas fa-lightbulb"></i> Detailed descriptions improve AI recommendation quality
            </p>
        </div>

        <!-- Buttons -->
        <div class="flex gap-4 pt-4">
            <button type="submit" class="btn-modern btn-primary flex-1">
                <i class="fas fa-{{ 'save' if book else 'plus-circle' }}"></i>
                {{ 'Save Changes' if book else 'Add Book' }}
            </button>
            <a href="{{ '/books/' + book.id|string if book else '/books' }}"
                class="btn-modern btn-secondary flex-1 text-center">
                Cancel
            </a>
        </div>
    </form>
</div>
{% endblock %}